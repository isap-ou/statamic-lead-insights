const S=window.Vue,{BaseTransition:L,BaseTransitionPropsValidators:E,Comment:H,DeprecationTypes:A,EffectScope:F,ErrorCodes:V,ErrorTypeStrings:B,Fragment:U,KeepAlive:N,ReactiveEffect:O,Static:z,Suspense:G,Teleport:_,Text:K,TrackOpTypes:W,Transition:j,TransitionGroup:$,TriggerOpTypes:q,VueElement:Q,__esModule:J,assertNumber:X,callWithAsyncErrorHandling:Y,callWithErrorHandling:Z,camelize:ee,capitalize:te,cloneVNode:oe,compatUtils:ae,compile:re,computed:c,createApp:ne,createBlock:v,createCommentVNode:y,createElementBlock:u,createElementVNode:p,createHydrationRenderer:se,createPropsRestProxy:ie,createRenderer:le,createSSRApp:de,createSlots:ce,createStaticVNode:ue,createTextVNode:pe,createVNode:T,customRef:me,defineAsyncComponent:ge,defineComponent:he,defineCustomElement:Ce,defineEmits:be,defineExpose:fe,defineModel:Se,defineOptions:ve,defineProps:ye,defineSSRCustomElement:Te,defineSlots:Pe,devtools:we,effect:xe,effectScope:Re,getCurrentInstance:ke,getCurrentScope:De,getCurrentWatcher:Ie,getTransitionRawChildren:Me,guardReactiveProps:Le,h:Ee,handleError:He,hasInjectionContext:Ae,hydrate:Fe,hydrateOnIdle:Ve,hydrateOnInteraction:Be,hydrateOnMediaQuery:Ue,hydrateOnVisible:Ne,initCustomFormatter:Oe,initDirectivesForSSR:ze,inject:Ge,isMemoSame:_e,isProxy:Ke,isReactive:We,isReadonly:je,isRef:$e,isRuntimeOnly:qe,isShallow:Qe,isVNode:Je,markRaw:Xe,mergeDefaults:Ye,mergeModels:Ze,mergeProps:et,nextTick:tt,nodeOps:ot,normalizeClass:at,normalizeProps:rt,normalizeStyle:nt,onActivated:st,onBeforeMount:it,onBeforeUnmount:lt,onBeforeUpdate:dt,onDeactivated:ct,onErrorCaptured:ut,onMounted:P,onRenderTracked:pt,onRenderTriggered:mt,onScopeDispose:gt,onServerPrefetch:ht,onUnmounted:Ct,onUpdated:bt,onWatcherCleanup:ft,openBlock:n,patchProp:St,popScopeId:vt,provide:yt,proxyRefs:Tt,pushScopeId:Pt,queuePostFlushCb:wt,reactive:xt,readonly:Rt,ref:s,registerRuntimeCompiler:kt,render:Dt,renderList:It,renderSlot:Mt,resolveComponent:Lt,resolveDirective:Et,resolveDynamicComponent:Ht,resolveFilter:At,resolveTransitionHooks:Ft,setBlockTracking:Vt,setDevtoolsHook:Bt,setTransitionHooks:Ut,shallowReactive:Nt,shallowReadonly:Ot,shallowRef:zt,ssrContextKey:Gt,ssrUtils:_t,stop:Kt,toDisplayString:i,toHandlerKey:Wt,toHandlers:jt,toRaw:$t,toRef:qt,toRefs:Qt,toValue:Jt,transformVNodeArgs:Xt,triggerRef:Yt,unref:m,useAttrs:Zt,useCssModule:eo,useCssVars:to,useHost:oo,useId:ao,useModel:ro,useSSRContext:no,useShadowRoot:so,useSlots:io,useTemplateRef:lo,useTransitionState:co,vModelCheckbox:uo,vModelDynamic:po,vModelRadio:mo,vModelSelect:go,vModelText:ho,vShow:Co,version:bo,warn:fo,watch:So,watchEffect:vo,watchPostEffect:yo,watchSyncEffect:To,withAsyncContext:Po,withCtx:g,withDefaults:wo,withDirectives:xo,withKeys:Ro,withMemo:ko,withModifiers:Do,withScopeId:Io}=S,{Alert:Mo,AuthCard:Lo,Avatar:Eo,Badge:Ho,Button:Ao,ButtonGroup:Fo,Calendar:Vo,Card:Bo,CardList:Uo,CardListItem:No,CardPanel:Oo,CharacterCounter:zo,Checkbox:Go,CheckboxGroup:_o,CodeEditor:Ko,Combobox:Wo,CommandPaletteItem:jo,ConfirmationModal:$o,Context:qo,ContextFooter:Qo,ContextHeader:Jo,ContextItem:Xo,ContextLabel:Yo,ContextMenu:Zo,ContextSeparator:ea,CreateForm:ta,DatePicker:oa,DateRangePicker:aa,Description:ra,DocsCallout:na,DragHandle:sa,Dropdown:ia,DropdownItem:la,DropdownLabel:da,DropdownMenu:ca,DropdownSeparator:ua,DropdownFooter:pa,DropdownHeader:ma,Editable:ga,ErrorMessage:ha,EmptyStateItem:Ca,EmptyStateMenu:ba,Field:fa,Header:Sa,Heading:va,HoverCard:ya,Icon:Ta,Input:Pa,InputGroup:wa,InputGroupAppend:xa,InputGroupPrepend:Ra,Label:ka,Listing:w,ListingCustomizeColumns:Da,ListingFilters:Ia,ListingHeaderCell:Ma,ListingPagination:La,ListingPresets:Ea,ListingPresetTrigger:Ha,ListingRowActions:Aa,ListingSearch:Fa,ListingTable:Va,ListingTableBody:Ba,ListingTableHead:Ua,ListingToggleAll:Na,LivePreview:Oa,LivePreviewPopout:za,Modal:Ga,ModalClose:_a,ModalTitle:Ka,Pagination:Wa,Panel:ja,PanelFooter:$a,PanelHeader:qa,Popover:Qa,PublishComponents:Ja,PublishContainer:Xa,publishContextKey:Ya,injectPublishContext:Za,PublishField:er,PublishFields:tr,PublishFieldsProvider:or,PublishForm:ar,PublishLocalizations:rr,PublishSections:nr,PublishTabs:sr,Radio:ir,RadioGroup:lr,Select:dr,Separator:cr,Slider:ur,Skeleton:pr,SplitterGroup:mr,SplitterPanel:gr,SplitterResizeHandle:hr,StatusIndicator:Cr,Subheading:br,Switch:fr,TabContent:Sr,Stack:vr,StackClose:yr,StackHeader:Tr,StackFooter:Pr,StackContent:wr,Table:xr,TableCell:Rr,TableColumn:kr,TableColumns:Dr,TableRow:Ir,TableRows:Mr,TabList:Lr,TabProvider:Er,Tabs:Hr,TabTrigger:Ar,Textarea:Fr,TimePicker:Vr,ToggleGroup:Br,ToggleItem:Ur,Widget:x,registerIconSet:Nr,registerIconSetFromStrings:Or}=__STATAMIC__.ui,R={key:0,class:"card p-4"},k={class:"text-gray text-sm"},D=["href"],I={class:"text-gray-600 text-sm"},M={__name:"LeadInsightsTable",props:{title:{type:String,required:!0},dataUrl:{type:String,default:null},days:{type:Number,default:30},exportUrl:{type:String,default:null},labels:{type:Object,default:()=>({})},message:{type:String,default:null}},setup(t){const o=t,{$axios:h}=Statamic.$app.config.globalProperties,l=s([]),a=s(0),r=s(!!o.dataUrl);async function C(){if(o.dataUrl){r.value=!0;try{const{data:e}=await h.get(o.dataUrl);l.value=e.rows,a.value=e.total}catch(e){console.error("Lead Insights: failed to load widget data",e)}finally{r.value=!1}}}P(C);const b=c(()=>[{field:"label",label:o.labels.label,sortable:!0,visible:!0},{field:"count",label:o.labels.leads,sortable:!0,visible:!0},{field:"share",label:o.labels.share,sortable:!0,visible:!0}]),f=c(()=>l.value.map((e,d)=>({id:d,label:e.label,count:e.count,share:a.value>0?`${Math.round(e.count/a.value*1e3)/10}%`:"0%"})));return(e,d)=>t.message?(n(),u("div",R,[p("p",k,i(t.message),1)])):(n(),v(m(x),{key:1,title:t.title},{actions:g(()=>[t.exportUrl?(n(),u("a",{key:0,href:t.exportUrl,class:"text-blue-500 hover:text-blue-700 text-sm"},i(t.labels.exportCsv),9,D)):y("",!0),p("span",I,i(t.labels.lastNDays),1)]),default:g(()=>[T(m(w),{class:"lead-insights-table",items:f.value,columns:b.value,loading:r.value,"allow-search":!1,"allow-presets":!1,"allow-customizing-columns":!1,"sort-column":"count","sort-direction":"desc"},null,8,["items","columns","loading"])]),_:1},8,["title"]))}};Statamic.booting(()=>{Statamic.$components.register("lead-insights-table",M)});
